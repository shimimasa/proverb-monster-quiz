# 2025-01-21 コンテンツ検証結果と修正計画

## 検証結果サマリー

### 全体統計
- **検証実施日時**: 2025年1月21日 21:19
- **検証対象ファイル**: 3ファイル（proverbs.json, idioms.json, four_character_idioms.json）
- **総アイテム数**: 1000件（ことわざ400件、慣用句350件、四字熟語250件）
- **総エラー数**: 1009件
- **総警告数**: 105件

## 主要な問題点

### 1. 読みがなの問題（エラー650件）
**問題**: 読みがなに「・」（中点）が含まれている
- **影響範囲**: 主に慣用句（idioms.json）で発生
- **例**: 「あしを・あらう」「きが・きでない」など
- **原因**: 読みの区切りを示すために「・」を使用している

**修正方針**:
- すべての「・」を削除し、ひらがなのみの読みがなに修正
- 例: 「あしを・あらう」→「あしをあらう」

### 2. 例文の欠落（エラー250件）
**問題**: four_character_idioms.jsonのすべてのアイテムで`example_sentence`フィールドが欠落
- **影響範囲**: 四字熟語250件すべて
- **原因**: JSONデータ作成時に例文が含まれていない

**修正方針**:
- 各四字熟語に子ども向けの分かりやすい例文を追加
- 例文は日常生活での使用例を中心に作成

### 3. 難易度設定の問題（警告100件）
**問題**: 四字熟語で「小学生」レベルが100件存在
- **影響範囲**: 四字熟語の40%
- **懸念**: 四字熟語は一般的に難しいため、小学生レベルが多すぎる可能性

**修正方針**:
- 各四字熟語の難易度を再評価
- 本当に小学生向けのもののみを「小学生」レベルに
- それ以外は「中学生」または「高校生」レベルに変更

### 4. その他の問題
- **IDの重複**: 9件
- **意味の説明が短い**: 3件（10文字未満）

## 修正実装計画

### Phase 1: 自動修正可能な問題（即座に対応）
1. **読みがなの「・」削除**
   - スクリプトで一括置換
   - 650件のエラーを即座に解消

### Phase 2: 半自動修正（1-2日）
1. **四字熟語の例文追加**
   - 基本的な例文テンプレートを作成
   - AIを活用して子ども向けの例文を生成
   - 人手で最終確認

2. **難易度の再評価**
   - 小学校で習う漢字を基準に再分類
   - 意味の抽象度も考慮

### Phase 3: 手動修正（2-3日）
1. **重複IDの解消**
2. **短い説明文の拡充**
3. **全体的な品質チェック**

## 自動修正スクリプト（読みがな修正）

```javascript
// fixReadings.js
const fs = require('fs').promises;
const path = require('path');

async function fixReadings() {
  const files = ['proverbs.json', 'idioms.json', 'four_character_idioms.json'];
  
  for (const file of files) {
    const filePath = path.join(__dirname, '..', 'public', 'data', file);
    const content = await fs.readFile(filePath, 'utf-8');
    const data = JSON.parse(content);
    
    // 読みがなの「・」を削除
    const fixed = data.map(item => ({
      ...item,
      reading: item.reading ? item.reading.replace(/・/g, '') : item.reading
    }));
    
    await fs.writeFile(filePath, JSON.stringify(fixed, null, 2), 'utf-8');
    console.log(`${file}: 読みがなを修正しました`);
  }
}

fixReadings().catch(console.error);
```

## 今後の対応

1. **即座に実行**: 読みがな修正スクリプトの実行
2. **本日中**: 四字熟語の例文追加作業開始
3. **2日以内**: 難易度の再評価完了
4. **3日以内**: すべての修正完了とデプロイ

## 品質保証

修正後は以下を実施：
1. 再度検証スクリプトを実行
2. ランダムサンプリングでの人手確認（各タイプ20件）
3. 実際のゲームプレイでの動作確認
4. ユーザーテストの実施