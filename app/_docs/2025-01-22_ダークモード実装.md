# 2025-01-22 ダークモード実装

## 実装概要
ユーザーがライトモード、ダークモード、システム設定に従うモードを選択できるテーマ機能を実装しました。

## 実装内容

### 1. ThemeContext の作成
- `src/contexts/ThemeContext.tsx` を新規作成
- テーマの状態管理とシステム設定の監視機能を実装
- localStorage にテーマ設定を保存

### 2. CSS変数の定義
- `src/index.css` にライト/ダークテーマ用のCSS変数を追加
- カラー変数：
  - 背景色（background, surface）
  - テキスト色（primary, secondary, tertiary）
  - ボーダー色
  - アクセントカラー（primary, success, error, warning）
  - シャドウとオーバーレイ

### 3. テーマ切り替えトランジション
- テーマ切り替え時のスムーズなトランジション効果を追加
- 300msのイージングアニメーション

### 4. 設定画面の更新
- `SettingsScreen.tsx` にテーマ選択UI を追加
- ラジオボタンで3つのオプション：
  - ライトモード（太陽アイコン）
  - ダークモード（月アイコン）
  - システム設定に従う（デスクトップアイコン）

### 5. テーマ用CSSヘルパー
- `src/styles/theme.css` を作成
- ダークモード時のTailwindクラスの自動調整
- テーマ対応のユーティリティクラス

## 技術的な詳細

### CSS変数の構成
```css
--color-background: 背景色
--color-surface: カードやパネルの背景
--color-text-primary: メインテキスト
--color-primary: プライマリーカラー
```

### システム設定の監視
```javascript
window.matchMedia('(prefers-color-scheme: dark)')
```
を使用してOSのダークモード設定を監視

### 今後の改善点
1. 各コンポーネントでハードコードされた色をCSS変数に置き換える
2. アイコンの色もテーマに対応させる
3. グラフやチャートの色もダークモード対応にする

## テスト方法
1. 設定画面でテーマを切り替えて動作確認
2. システムのダークモード設定を変更して自動切り替えを確認
3. ページリロード後もテーマが保持されることを確認