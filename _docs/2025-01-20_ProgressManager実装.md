# 2025-01-20 ProgressManager実装

## 実装内容

### ProgressManagerクラスの拡張
- **ファイル**: `src/core/ProgressManager.ts`
- **主な機能**:

#### 1. レベルシステム
- 経験値とレベルの計算（基礎値100、倍率1.5）
- レベルアップ時のLevelUpResult返却
- 次レベルまでの必要経験値と進捗率の計算
- ストリークボーナスによる経験値増加

#### 2. 進捗管理
- 総問題数、正解数、ストリークの追跡
- 正解率の計算
- 連続正解記録の保存と平均計算
- コンテンツタイプ別の使用回数追跡

#### 3. アチーブメントシステム
- 11種類のアチーブメント定義
  - 初めての正解
  - 連続正解（5, 10, 20問）
  - 累計正解数（10, 50, 100, 500問）
  - 正解率90%以上
  - モンスターコレクション（10, 50体）
- 条件チェックと自動解除
- アチーブメント進捗の統計

#### 4. 統計機能（ProgressStats）
- 正解率
- 平均ストリーク
- 最高ストリーク
- 1日あたりの問題数
- お気に入りコンテンツタイプ
- レベル進捗情報

#### 5. セッション管理
- ゲームセッションの保存
- 最近のセッション取得
- 日別問題数の追跡

#### 6. LocalStorageとの統合
- localStorageManagerを使用したデータ永続化
- ユーザー進捗とアチーブメントの分離保存
- 起動時の自動データ読み込み

### テストの作成
- **ファイル**: `tests/core/ProgressManager.test.ts`
- **テスト内容**:
  - 21個のテストケース全て成功
  - レベルシステム、アチーブメント、統計機能のテスト
  - データ永続化とセッション管理のテスト
  - リセット機能のテスト

## 技術的な詳細

### レベル計算式
```typescript
レベル1: 0 EXP
レベル2: 100 EXP
レベル3: 250 EXP (100 + 150)
レベル4: 475 EXP (100 + 150 + 225)
...
```

### 経験値計算
- 基礎経験値: 10
- ストリークボーナス: min(streak * 2, 20)
- レベルボーナス: floor(level / 5) * 5

### 日別追跡
- 日付をISO形式（YYYY-MM-DD）で管理
- セッションデータから日別問題数を集計

## 実装の特徴

1. **拡張可能なアチーブメントシステム**
   - 新しいアチーブメントタイプを容易に追加可能
   - 条件判定の柔軟な実装

2. **詳細な統計情報**
   - プレイヤーの学習傾向を多角的に分析
   - モチベーション維持のための進捗可視化

3. **効率的なデータ管理**
   - 必要最小限のデータ保存
   - 計算可能な値は動的に生成

## 次のステップ
- UIコンポーネントとの統合
- レベルアップ演出の実装
- アチーブメント獲得通知の実装
- 統計画面の作成