import{r as e,j as t,m as r,A as n}from"./chunk-DQeWIckh.js";import{f as a,F as s,V as i}from"./index-W8LrRRRx.js";const l={proverb:{primary:["#2E7D32","#388E3C","#43A047","#4CAF50","#66BB6A"],secondary:["#81C784","#A5D6A7","#C8E6C9","#E8F5E9"],accent:["#FF6B6B","#FFD93D","#6BCF7F"]},idiom:{primary:["#1565C0","#1976D2","#1E88E5","#2196F3","#42A5F5"],secondary:["#64B5F6","#90CAF9","#BBDEFB","#E3F2FD"],accent:["#FF6B6B","#FFD93D","#6BCF7F"]},four_character_idiom:{primary:["#6A1B9A","#7B1FA2","#8E24AA","#9C27B0","#AB47BC"],secondary:["#BA68C8","#CE93D8","#E1BEE7","#F3E5F5"],accent:["#FF6B6B","#FFD93D","#6BCF7F"]}},c={common:["circle","square","triangle"],rare:["star","hexagon","diamond"],epic:["octagon","heart","cloud"],legendary:["dragon","phoenix","unicorn"]},o={eyes:{common:["dot","circle"],rare:["star","heart"],epic:["sparkle","flame"],legendary:["galaxy","rainbow"]},mouth:{common:["smile","neutral"],rare:["grin","tongue"],epic:["fangs","magic"],legendary:["cosmic","elemental"]},accessories:{common:[],rare:["hat","ribbon"],epic:["crown","wings"],legendary:["aura","halo","constellation"]}};function $(e,t){const r=e+t.toString();let n=0;for(let a=0;a<r.length;a++){n=(n<<5)-n+r.charCodeAt(a),n&=n}return Math.abs(n)/2147483647}function d(e,t,r){const n=$(t,r);return e[Math.floor(n*e.length)]}function x(e,t=100){const r=e.id,n=e.sourceContent.type,a=e.rarity,s=l[n]||l.proverb,i=d(s.primary,r,0),x=d(s.secondary,r,1),m=d(s.accent,r,2),h=d(c[a]||c.common,r,3),u=d(o.eyes[a]||o.eyes.common,r,4),y=d(o.mouth[a]||o.mouth.common,r,5),f=o.accessories[a]||[],g=f.length>0?d(f,r,6):null,p=`\n    <svg width="${t}" height="${t}" viewBox="0 0 ${t} ${t}" xmlns="http://www.w3.org/2000/svg">\n      \x3c!-- ËÉåÊôØ„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ --\x3e\n      <defs>\n        <radialGradient id="bgGradient-${r}">\n          <stop offset="0%" stop-color="${i}" />\n          <stop offset="100%" stop-color="${x}" />\n        </radialGradient>\n        ${"legendary"===a?`\n        <filter id="glow-${r}">\n          <feGaussianBlur stdDeviation="4" result="coloredBlur"/>\n          <feMerge>\n            <feMergeNode in="coloredBlur"/>\n            <feMergeNode in="SourceGraphic"/>\n          </feMerge>\n        </filter>\n        `:""}\n      </defs>\n      \n      \x3c!-- „É¢„É≥„Çπ„Çø„ÉºÊú¨‰Ωì --\x3e\n      <g ${"legendary"===a?`filter="url(#glow-${r})"`:""}>\n        \x3c!-- „Éú„Éá„Ç£ --\x3e\n        <path d="${function(e,t){const r=t/2,n=.4*t;switch(e){case"circle":default:return`M ${r} ${r-n} A ${n} ${n} 0 1 1 ${r} ${r+n} A ${n} ${n} 0 1 1 ${r} ${r-n}`;case"square":const e=1.5*n;return`M ${r-e} ${r-e} h ${2*e} v ${2*e} h ${2*-e} z`;case"triangle":return`M ${r} ${r-n} L ${r-n} ${r+n} L ${r+n} ${r+n} z`;case"star":const t=n,a=.5*n;let s="";for(let n=0;n<10;n++){const e=n*Math.PI/5-Math.PI/2,i=n%2==0?t:a,l=r+i*Math.cos(e),c=r+i*Math.sin(e);s+=0===n?`M ${l} ${c}`:` L ${l} ${c}`}return s+" z";case"hexagon":let i="";for(let c=0;c<6;c++){const e=c*Math.PI/3,t=r+n*Math.cos(e),a=r+n*Math.sin(e);i+=0===c?`M ${t} ${a}`:` L ${t} ${a}`}return i+" z";case"diamond":return`M ${r} ${r-n} L ${r+.7*n} ${r} L ${r} ${r+n} L ${r-.7*n} ${r} z`;case"octagon":let l="";for(let c=0;c<8;c++){const e=c*Math.PI/4,t=r+n*Math.cos(e),a=r+n*Math.sin(e);l+=0===c?`M ${t} ${a}`:` L ${t} ${a}`}return l+" z";case"heart":return`M ${r} ${r+.3*n} C ${r-.5*n} ${r-.3*n} ${r-n} ${r-.1*n} ${r-n} ${r-.4*n} C ${r-n} ${r-.7*n} ${r-.5*n} ${r-n} ${r} ${r-.7*n} C ${r+.5*n} ${r-n} ${r+n} ${r-.7*n} ${r+n} ${r-.4*n} C ${r+n} ${r-.1*n} ${r+.5*n} ${r-.3*n} ${r} ${r+.3*n} z`;case"cloud":return`M ${r-.4*n} ${r} C ${r-.4*n} ${r-.3*n} ${r-.2*n} ${r-.5*n} ${r} ${r-.5*n} C ${r+.2*n} ${r-.5*n} ${r+.4*n} ${r-.3*n} ${r+.4*n} ${r} C ${r+.4*n} ${r+.2*n} ${r+.2*n} ${r+.4*n} ${r} ${r+.4*n} C ${r-.2*n} ${r+.4*n} ${r-.4*n} ${r+.2*n} ${r-.4*n} ${r} z`}}(h,t)}" fill="url(#bgGradient-${r})" stroke="${m}" stroke-width="2" />\n        \n        \x3c!-- Ê®°Êßò --\x3e\n        ${$(r,7)>.5?`\n        <circle cx="${.3*t}" cy="${.5*t}" r="${.05*t}" fill="${m}" opacity="0.5" />\n        <circle cx="${.7*t}" cy="${.5*t}" r="${.05*t}" fill="${m}" opacity="0.5" />\n        `:""}\n        \n        \x3c!-- ÁõÆ --\x3e\n        ${function(e,t,r){const n=.1*t,a=.35*t,s=.35*t,i=.65*t;switch(e){case"dot":default:return`\n        <circle cx="${s}" cy="${a}" r="${.5*n}" fill="${r}" />\n        <circle cx="${i}" cy="${a}" r="${.5*n}" fill="${r}" />\n      `;case"circle":return`\n        <circle cx="${s}" cy="${a}" r="${n}" fill="white" stroke="${r}" stroke-width="2" />\n        <circle cx="${s}" cy="${a}" r="${.5*n}" fill="${r}" />\n        <circle cx="${i}" cy="${a}" r="${n}" fill="white" stroke="${r}" stroke-width="2" />\n        <circle cx="${i}" cy="${a}" r="${.5*n}" fill="${r}" />\n      `;case"star":return`\n        <text x="${s}" y="${a+.5*n}" text-anchor="middle" font-size="${2*n}" fill="${r}">‚≠ê</text>\n        <text x="${i}" y="${a+.5*n}" text-anchor="middle" font-size="${2*n}" fill="${r}">‚≠ê</text>\n      `;case"heart":return`\n        <text x="${s}" y="${a+.5*n}" text-anchor="middle" font-size="${2*n}" fill="${r}">‚ù§Ô∏è</text>\n        <text x="${i}" y="${a+.5*n}" text-anchor="middle" font-size="${2*n}" fill="${r}">‚ù§Ô∏è</text>\n      `}}(u,t,"#333333")}\n        \n        \x3c!-- Âè£ --\x3e\n        ${function(e,t,r){const n=.6*t,a=.5*t,s=.3*t;switch(e){case"smile":default:return`<path d="M ${a-s/2} ${n} Q ${a} ${n+s/2} ${a+s/2} ${n}" stroke="${r}" stroke-width="2" fill="none" />`;case"neutral":return`<line x1="${a-s/2}" y1="${n}" x2="${a+s/2}" y2="${n}" stroke="${r}" stroke-width="2" />`;case"grin":return`\n        <path d="M ${a-s/2} ${n} Q ${a} ${n+s/2} ${a+s/2} ${n}" stroke="${r}" stroke-width="2" fill="white" />\n        <line x1="${a-s/3}" y1="${n}" x2="${a-s/3}" y2="${n+5}" stroke="${r}" stroke-width="1" />\n        <line x1="${a}" y1="${n}" x2="${a}" y2="${n+5}" stroke="${r}" stroke-width="1" />\n        <line x1="${a+s/3}" y1="${n}" x2="${a+s/3}" y2="${n+5}" stroke="${r}" stroke-width="1" />\n      `;case"tongue":return`\n        <path d="M ${a-s/2} ${n} Q ${a} ${n+s/3} ${a+s/2} ${n}" stroke="${r}" stroke-width="2" fill="none" />\n        <ellipse cx="${a}" cy="${n+s/3}" rx="${s/4}" ry="${s/3}" fill="#FF69B4" />\n      `}}(y,t,"#333333")}\n        \n        \x3c!-- „Ç¢„ÇØ„Çª„Çµ„É™„Éº --\x3e\n        ${g?function(e,t){const r=t/2;switch(e){case"hat":return`\n        <rect x="${r-.25*t}" y="${.05*t}" width="${.5*t}" height="${.15*t}" fill="#4B5563" />\n        <rect x="${r-.15*t}" y="${.15*t}" width="${.3*t}" height="${.1*t}" fill="#374151" />\n      `;case"ribbon":return`\n        <path d="M ${r-.2*t} ${.1*t} L ${r} ${.15*t} L ${r+.2*t} ${.1*t} L ${r+.15*t} ${.2*t} L ${r} ${.15*t} L ${r-.15*t} ${.2*t} z" fill="#EC4899" />\n      `;case"crown":return`\n        <path d="M ${r-.25*t} ${.2*t} L ${r-.25*t} ${.1*t} L ${r-.15*t} ${.05*t} L ${r} ${.1*t} L ${r+.15*t} ${.05*t} L ${r+.25*t} ${.1*t} L ${r+.25*t} ${.2*t} z" fill="#FFD700" stroke="#FFA500" stroke-width="1" />\n      `;case"wings":return`\n        <path d="M ${r-.5*t} ${r} Q ${r-.7*t} ${r-.2*t} ${r-.4*t} ${r-.3*t} Q ${r-.3*t} ${r-.1*t} ${r-.3*t} ${r}" fill="rgba(255,255,255,0.7)" stroke="#E5E7EB" stroke-width="1" />\n        <path d="M ${r+.5*t} ${r} Q ${r+.7*t} ${r-.2*t} ${r+.4*t} ${r-.3*t} Q ${r+.3*t} ${r-.1*t} ${r+.3*t} ${r}" fill="rgba(255,255,255,0.7)" stroke="#E5E7EB" stroke-width="1" />\n      `;case"aura":return`\n        <circle cx="${r}" cy="${r}" r="${.45*t}" fill="none" stroke="url(#auraGradient)" stroke-width="3" opacity="0.6" />\n        <defs>\n          <radialGradient id="auraGradient">\n            <stop offset="0%" stop-color="#FFD700" />\n            <stop offset="50%" stop-color="#FFA500" />\n            <stop offset="100%" stop-color="#FF6347" />\n          </radialGradient>\n        </defs>\n      `;default:return""}}(g,t):""}\n      </g>\n      \n      \x3c!-- „É¨„Ç¢„É™„ÉÜ„Ç£„Ç®„Éï„Çß„ÇØ„Éà --\x3e\n      ${"legendary"===a?`\n      <g opacity="0.6">\n        <circle cx="${.2*t}" cy="${.2*t}" r="2" fill="#FFD700">\n          <animate attributeName="opacity" values="0;1;0" dur="2s" repeatCount="indefinite" />\n        </circle>\n        <circle cx="${.8*t}" cy="${.2*t}" r="2" fill="#FFD700">\n          <animate attributeName="opacity" values="0;1;0" dur="2s" begin="0.5s" repeatCount="indefinite" />\n        </circle>\n        <circle cx="${.5*t}" cy="${.1*t}" r="2" fill="#FFD700">\n          <animate attributeName="opacity" values="0;1;0" dur="2s" begin="1s" repeatCount="indefinite" />\n        </circle>\n      </g>\n      `:""}\n    </svg>\n  `;return p}const m=({monster:n,size:a=80,className:s="",showAnimation:i=!0,lazy:l=!0})=>{const[c,o]=e.useState(""),[$,d]=e.useState(!0),[m,h]=e.useState(!l),u=e.useRef(null);if(e.useEffect(()=>{if(!l)return;const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(h(!0),e.disconnect())})},{threshold:.1,rootMargin:"50px"});return u.current&&e.observe(u.current),()=>e.disconnect()},[l]),e.useEffect(()=>{if(m)try{const e=x(n,a);o(e),d(!1)}catch(e){d(!1)}},[n,a,m]),!m||$)return t.jsx("div",{ref:u,className:`flex items-center justify-center ${s}`,style:{width:a,height:a},children:t.jsx("div",{className:"animate-pulse bg-gray-300 rounded-full",style:{width:.8*a,height:.8*a}})});if(!c)return t.jsx("div",{className:`flex items-center justify-center ${s}`,style:{width:a,height:a},children:t.jsx("span",{className:"text-4xl",children:"üê≤"})});return t.jsx(r.div,{className:`inline-block ${s}`,variants:i?{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0,transition:{type:"spring",stiffness:200,damping:20}},hover:{scale:1.1,rotate:[0,-5,5,-5,0],transition:{rotate:{duration:.5,ease:"easeInOut"}}},tap:{scale:.9}}:{},initial:!!i&&"initial",animate:!!i&&"animate",whileHover:i?"hover":{},whileTap:i?"tap":{},dangerouslySetInnerHTML:{__html:c},style:{width:a,height:a}})},h=({monster:l})=>{const[c,o]=e.useState(!1),$={common:"from-gray-400 to-gray-600",rare:"from-blue-400 to-blue-600",epic:"from-purple-400 to-purple-600",legendary:"from-yellow-400 to-yellow-600"},d={proverb:"„Åì„Å®„Çè„Åñ",idiom:"ÊÖ£Áî®Âè•",four_character_idiom:"ÂõõÂ≠óÁÜüË™û"};return l.unlocked?t.jsxs(t.Fragment,{children:[t.jsxs(r.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!0),className:`bg-white rounded-lg p-4 text-center cursor-pointer shadow-md hover:shadow-lg transition-all border-2 relative overflow-hidden ${{common:"border-gray-300",rare:"border-blue-400",epic:"border-purple-400",legendary:"border-yellow-400"}[l.rarity]} ${{common:"",rare:"shadow-blue-300",epic:"shadow-purple-300",legendary:"shadow-yellow-300 shadow-lg"}[l.rarity]}`,children:["legendary"===l.rarity&&t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx(s,{className:"text-yellow-500 text-sm animate-pulse"})}),t.jsx("div",{className:"mx-auto mb-3",children:t.jsx(m,{monster:l,size:80,className:"mx-auto",showAnimation:!0})}),t.jsx("h3",{className:"text-xs md:text-sm font-semibold text-gray-800 truncate px-1",children:l.name}),t.jsx("div",{className:"mt-2 text-xs text-gray-500",children:d[l.sourceContent.type]})]}),t.jsx(n,{children:c&&t.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(!1),className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs(r.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white rounded-lg p-6 max-w-md w-full shadow-2xl",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-32 h-32 mx-auto mb-4",children:t.jsx(m,{monster:l,size:128,className:"mx-auto",showAnimation:!1})}),"legendary"===l.rarity&&t.jsx(r.div,{className:"absolute top-0 right-1/2 transform translate-x-16",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:t.jsx(s,{className:"text-yellow-500 text-2xl"})})]}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center mb-3",children:l.name}),t.jsxs("div",{className:"flex justify-center items-center space-x-2 mb-4",children:[t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium bg-gradient-to-r ${$[l.rarity]} text-white`,children:{common:"„Ç≥„É¢„É≥",rare:"„É¨„Ç¢",epic:"„Ç®„Éî„ÉÉ„ÇØ",legendary:"„É¨„Ç∏„Çß„É≥„ÉÄ„É™„Éº"}[l.rarity]}),t.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-700",children:d[l.sourceContent.type]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[t.jsxs("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:["ÂÖÉ„Å®„Å™„Å£„Åü",d[l.sourceContent.type],":"]}),t.jsx("p",{className:"font-bold text-gray-800 text-lg",children:l.sourceContent.text}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:l.sourceContent.reading}),t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:l.sourceContent.meaning})}),l.sourceContent.example_sentence&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"‰æãÊñá:"}),t.jsx("p",{className:"text-sm text-gray-700 italic",children:l.sourceContent.example_sentence})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(i,{className:"mr-1"}),"Áç≤ÂæóÊó•: ",l.dateObtained?new Date(l.dateObtained).toLocaleDateString("ja-JP"):"‰∏çÊòé"]}),t.jsx("span",{className:"text-gray-400",children:l.sourceContent.difficulty})]}),t.jsx("button",{onClick:()=>o(!1),className:"w-full mt-6 px-4 py-2 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all font-medium",children:"Èñâ„Åò„Çã"})]})})})]}):t.jsxs(r.div,{whileHover:{scale:1.02},className:"bg-gray-100 rounded-lg p-4 text-center border-2 border-gray-300 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-2 right-2",children:t.jsx(a,{className:"text-gray-400 text-sm"})}),t.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gray-300 rounded-full mx-auto mb-3 flex items-center justify-center",children:t.jsx("span",{className:"text-2xl md:text-3xl text-gray-500",children:"?"})}),t.jsx("p",{className:"text-xs md:text-sm text-gray-500 font-medium",children:"Êú™Áô∫Ë¶ã"}),t.jsx("div",{className:`h-1 w-full bg-gradient-to-r ${$[l.rarity]} opacity-30 mt-2 -mx-4 px-4`})]})};export{h as M,m as a};
