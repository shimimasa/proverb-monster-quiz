import{r as e,j as a,m as l,A as t}from"./chunk-DQeWIckh.js";import{u as s,c as r,k as i}from"./index-W8LrRRRx.js";import{M as n}from"./chunk-CDi5Mvmr.js";import"./chunk-BI3NJeJA.js";import"./chunk-MJnNx1Rr.js";import"./chunk-BGx2W5xE.js";const c=()=>{const{monsterManager:c,progressManager:d}=s(),[o,x]=e.useState("all"),[m,u]=e.useState("all"),[g,h]=e.useState("all"),[p,b]=e.useState("date"),[y,j]=e.useState(!1),v=c.getAllMonsters(),N=c.getCollectionStats(),f=c.getCompletionProgress(),w=e.useMemo(()=>{let e=v;"all"!==o&&(e=e.filter(e=>e.rarity===o)),"all"!==m&&(e=e.filter(e=>"unlocked"===m?e.unlocked:!e.unlocked)),"all"!==g&&(e=e.filter(e=>e.sourceContent.type===g));return[...e].sort((e,a)=>{switch(p){case"name":return e.name.localeCompare(a.name);case"rarity":const l={common:0,rare:1,epic:2,legendary:3};return l[a.rarity]-l[e.rarity];case"date":return e.dateObtained||a.dateObtained?e.dateObtained?a.dateObtained?a.dateObtained.getTime()-e.dateObtained.getTime():-1:1:0;case"type":return e.sourceContent.type.localeCompare(a.sourceContent.type);default:return 0}})},[v,o,m,g,p]);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"モンスターコレクション"}),a.jsx(r,{className:"text-3xl text-yellow-500"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[a.jsx("span",{children:"完成度"}),a.jsxs("span",{children:[f.percentage.toFixed(1),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:a.jsx(l.div,{className:"h-full bg-gradient-to-r from-green-400 to-green-600",initial:{width:0},animate:{width:`${f.percentage}%`},transition:{duration:1,ease:"easeOut"}})})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"獲得数"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:N.unlocked})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"コモン"}),a.jsx("p",{className:"text-xl font-semibold text-gray-600",children:N.byRarity.common})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"レア"}),a.jsx("p",{className:"text-xl font-semibold text-blue-600",children:N.byRarity.rare})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"エピック+"}),a.jsx("p",{className:"text-xl font-semibold text-purple-600",children:N.byRarity.epic+N.byRarity.legendary})]})]}),f.nextMilestone&&a.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["次のマイルストーン（",f.nextMilestone,"%）まで",a.jsxs("span",{className:"font-semibold text-gray-800 ml-1",children:["あと",f.monstersToNext,"体"]})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[a.jsxs("button",{onClick:()=>j(!y),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(i,{className:"text-gray-600"}),a.jsx("span",{className:"font-medium text-gray-700",children:"フィルター & ソート"})]}),a.jsx(l.div,{animate:{rotate:y?180:0},transition:{duration:.3},children:"▼"})]}),a.jsx(t,{children:y&&a.jsx(l.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:a.jsxs("div",{className:"p-4 pt-0 space-y-4 border-t",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"レアリティ"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"すべて",color:"gray"},{value:"common",label:"コモン",color:"gray"},{value:"rare",label:"レア",color:"blue"},{value:"epic",label:"エピック",color:"purple"},{value:"legendary",label:"レジェンダリー",color:"yellow"}].map(e=>a.jsx("button",{onClick:()=>x(e.value),className:"px-3 py-1 rounded-full text-sm font-medium transition-all "+(o===e.value?"all"===e.value?"bg-gray-600 text-white":`bg-${e.color}-500 text-white`:"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"獲得状態"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"すべて"},{value:"unlocked",label:"獲得済み"},{value:"locked",label:"未獲得"}].map(e=>a.jsx("button",{onClick:()=>u(e.value),className:"px-3 py-1 rounded-full text-sm font-medium transition-all "+(m===e.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"タイプ"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"すべて"},{value:"proverb",label:"ことわざ"},{value:"idiom",label:"慣用句"},{value:"four_character_idiom",label:"四字熟語"}].map(e=>a.jsx("button",{onClick:()=>h(e.value),className:"px-3 py-1 rounded-full text-sm font-medium transition-all "+(g===e.value?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"並び順"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"date",label:"獲得日順"},{value:"name",label:"名前順"},{value:"rarity",label:"レアリティ順"},{value:"type",label:"タイプ順"}].map(e=>a.jsx("button",{onClick:()=>b(e.value),className:"px-3 py-1 rounded-full text-sm font-medium transition-all "+(p===e.value?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]})]})})})]}),a.jsxs("div",{className:"text-sm text-gray-600 px-2",children:[w.length,"体のモンスターを表示中"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:a.jsx(t,{children:w.map((e,t)=>a.jsx(l.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3,delay:.05*t},children:a.jsx(n,{monster:e})},e.id))})}),0===w.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"該当するモンスターが見つかりません"}),a.jsx("button",{onClick:()=>{x("all"),u("all"),h("all")},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"フィルターをリセット"})]})]})};export{c as MonsterCollection};
